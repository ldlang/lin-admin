import{b as w,A as T,B as q,r as c,ai as R,o as f,c as v,e as V,w as E,F as B,h as H,f as i,g as N,j as d,n as A,aG as M,q as O,aH as F,k as I}from"./index-dFPmeL4W.js";import{E as L,a as S}from"./el-tab-pane-B3FmCnUz.js";import{o as j}from"./index-D2r8IPio.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./error-Cq9Fpw4b.js";import"./strings-DDUGysvP.js";import"./event-BB_Ol6Sd.js";import"./vnode-Cm_8Cbzr.js";const D={class:"top-tag w-full bg-white"},o="/home",G=w({__name:"tag",setup(U){M(e=>({"093e1b0e":i(h).y,"093e1b0d":i(h).x}));const{tagList:a,activeTag:_}=T(q()),u=O(),l=c(""),p=c(""),h=c({x:"0",y:"0"}),s=c(!1);R(_,e=>{l.value=e.fullPath},{immediate:!0});function b(e){const t=a.value.find(n=>n.fullPath===e.paneName);u.push({path:t.fullPath,query:t==null?void 0:t.query})}function x(e){p.value=e.target.innerText,e.preventDefault(),e.stopPropagation(),h.value={x:e.clientX+"px",y:e.clientY+"px"},s.value=!0}const m=c(null);j(m,()=>{s.value=!1});function g(e){if(l.value===e){const t=a.value.findIndex(n=>n.fullPath===e);if(t===-1)return;l.value=a.value[t-1].fullPath,u.push({path:a.value[t-1].fullPath,query:a.value[t-1].query})}a.value=a.value.filter(t=>t.fullPath!==e)}function P(){s.value=!1,a.value=a.value.filter(e=>F(p.value)?e.fullPath===l.value||e.fullPath===o:e.title===p.value||e.fullPath===o),a.value.length===2?u.push({path:a.value[1].fullPath,query:a.value[1].query}):u.push(o)}function k(){s.value=!1,a.value=a.value.filter(e=>e.fullPath===o),u.push(o)}return(e,t)=>{const n=S,C=L;return f(),v("div",D,[V(C,{modelValue:i(l),"onUpdate:modelValue":t[0]||(t[0]=r=>N(l)?l.value=r:null),type:"card",onContextmenu:x,onTabClick:b,onTabRemove:g},{default:E(()=>[(f(!0),v(B,null,H(i(a),(r,y)=>(f(),I(n,{key:y,closable:r.fullPath!==o,label:r.title,name:r.fullPath},null,8,["closable","label","name"]))),128))]),_:1},8,["modelValue"]),i(s)?(f(),v("div",{key:0,ref_key:"contextmenuRef",ref:m,class:"contextmenu fixed w-76 bg-white rd-3 z-10 hand flex flex-col shadow-lg"},[d("div",{class:"p-5 b-b-1 text-center b-b-gray-200 b-b-solid hover-bg-eee",onClick:P}," 关闭其他 "),d("div",{class:"p-5 text-center hover-bg-eee",onClick:k},"关闭所有")],512)):A("",!0)])}}}),ee=z(G,[["__scopeId","data-v-ade42203"]]);export{ee as default};
