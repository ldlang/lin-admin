import"./index-Djzf4RzS.js";/* empty css                */import{j as S,d as P,z as U,h as E,Z as L,_ as N,aD as z,aE as R,D as w,x as k,o as K,b as F,w as D,e as T,u as _,l as G,N as H,U as W}from"./element-plus-DBjmp5RF.js";import"./lodash-Bwfjn3gr.js";import"./crypto-js-DzGpDWq6.js";var q=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Z=function(e){return q.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},J=function(e,t,n){Object.keys(t).filter(Z).forEach(function(i){var o=t[i];typeof o=="function"&&(i==="onInit"?o(e,n):n.on(i.substring(2),function(a){return o(a,n)}))})},Q=function(e,t,n,i){var o=e.modelEvents?e.modelEvents:null,a=Array.isArray(o)?o.join(" "):o;S(i,function(d,c){n&&typeof d=="string"&&d!==c&&d!==n.getContent({format:e.outputFormat})&&n.setContent(d)}),n.on(a||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},X=function(e,t,n,i,o,a){i.setContent(a()),n.attrs["onUpdate:modelValue"]&&Q(t,n,i,o),J(e,n.attrs,i)},V=0,A=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return V++,e+"_"+n+V+String(t)},Y=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},j=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},$=function(e,t){return j(e).concat(j(t))},ee=function(e){return e==null},B=function(){return{listeners:[],scriptId:A("tiny-script"),scriptLoaded:!1}},ne=function(){var e=B(),t=function(o,a,d,c){var r=a.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=o,r.src=d;var m=function(){r.removeEventListener("load",m),c()};r.addEventListener("load",m),a.head&&a.head.appendChild(r)},n=function(o,a,d){e.scriptLoaded?d():(e.listeners.push(d),o.getElementById(e.scriptId)||t(e.scriptId,o,a,function(){e.listeners.forEach(function(c){return c()}),e.scriptLoaded=!0}))},i=function(){e=B()};return{load:n,reinitialize:i}},te=ne(),oe=function(){return typeof window<"u"?window:global},f=function(){var e=oe();return e&&e.tinymce?e.tinymce:null},ie={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},s=function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},s.apply(this,arguments)},ae=function(e,t,n,i){return e(i||"div",{id:t,ref:n})},re=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},C={selector:void 0,target:void 0},le=P({props:ie,setup:function(e,t){var n=e.init?s(s({},e.init),C):s({},C),i=U(e),o=i.disabled,a=i.modelValue,d=i.tagName,c=E(null),r=null,m=e.id||A("tiny-vue"),h=e.init&&e.init.inline||e.inline,y=!!t.attrs["onUpdate:modelValue"],b=!0,I=e.initialValue?e.initialValue:"",p="",M=function(l){return y?function(){return a!=null&&a.value?a.value:""}:function(){return l?I:p}},g=function(){var l=M(b),u=s(s({},n),{readonly:e.disabled,target:c.value,plugins:$(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:h,setup:function(v){r=v,v.on("init",function(x){return X(x,e,t,v,a,l)}),typeof n.setup=="function"&&n.setup(v)}});Y(c.value)&&(c.value.style.visibility=""),f().init(u),b=!1};S(o,function(l){var u;r!==null&&(typeof((u=r.mode)===null||u===void 0?void 0:u.set)=="function"?r.mode.set(l?"readonly":"design"):r.setMode(l?"readonly":"design"))}),S(d,function(l){var u;y||(p=r.getContent()),(u=f())===null||u===void 0||u.remove(r),k(function(){return g()})}),L(function(){if(f()!==null)g();else if(c.value&&c.value.ownerDocument){var l=e.cloudChannel?e.cloudChannel:"6",u=e.apiKey?e.apiKey:"no-api-key",v=ee(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(l,"/tinymce.min.js"):e.tinymceScriptSrc;te.load(c.value.ownerDocument,v,g)}}),N(function(){f()!==null&&f().remove(r)}),h||(z(function(){b||g()}),R(function(){var l;y||(p=r.getContent()),(l=f())===null||l===void 0||l.remove(r)}));var O=function(l){var u;p=r.getContent(),(u=f())===null||u===void 0||u.remove(r),n=s(s(s({},n),l),C),k(function(){return g()})};return t.expose({rerender:O,getEditor:function(){return r}}),function(){return h?ae(w,m,c,e.tagName):re(w,m,c)}}});const ue=H("div",{class:"text-center"},"tinymce富文本编辑器",-1),me=P({__name:"tinymce",setup(e){const t=E('<p><img src="https://ldlang.github.io/lin-note/avatar.jpg" alt="logo" width="231" height="231"></p>'),n=E({menubar:!0,height:800,license_key:"gpl",convert_urls:!1,language:"zh_CN",plugins:`help preview importcss searchreplace autolink directionality code visualblocks visualchars 
  fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists
   wordcount emoticons accordion`,toolbar_mode:"Wrap",toolbar:`help code undo redo | accordion accordionremove | blocks fontfamily fontsize | bold italic underline strikethrough
    | align numlist bullist | link image | table media | lineheight outdent indent| forecolor backcolor removeformat |
     charmap emoticons | code fullscreen preview | print | pagebreak anchor codesample | ltr rtl`,branding:!1,nonbreaking_force_tab:!0,extended_valid_elements:"a[href]",image_title:!0,image_caption:!0,contextmenu:"link",file_picker_callback:(i,o,a)=>{a.filetype==="image"&&i("https://ldlang.github.io/lin-note/avatar.jpg",{alt:"logo"})},images_upload_handler:i=>new Promise((o,a)=>{o("https://ldlang.github.io/lin-note/avatar.jpg")})});return(i,o)=>{const a=W;return K(),F(a,null,{header:D(()=>[ue]),default:D(()=>[T(_(le),{modelValue:_(t),"onUpdate:modelValue":o[0]||(o[0]=d=>G(t)?t.value=d:null),init:_(n),"api-key":"no-api-key"},null,8,["modelValue","init"])]),_:1})}}});export{me as default};
